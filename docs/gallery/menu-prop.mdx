---
sidebar_position: 3
description: Provides a `_menu` prop which defines a popover menu as a ReactElement.
---

# deepMenuProp

Provides a `_menu` prop which defines a popover menu as a ReactElement.

## Installation

```bash
npm install react-beyond @react-beyond/menuprop
```

## Usage

```
deepMenuProp(opts: {
  id?: string
} = {}): HOC
```

- `id` - The id of the HOC. Defaults to `"menuProp"`.

(Check out the [Usage Patterns](/docs/guide/usage-patterns) to see alternative syntaxes.)

The HOC doesn't have a render config, as opposed to [deepTooltipProp](/docs/gallery/tooltip-prop), but the prop can receive complex values:

```tsx
type ConfigObject = {
  placement?: PlacementType
  enabled?: boolean
  body: ReactElement | ((close: () => void) => ReactElement)
}

type Falsy = false | undefined | null

declare module 'react' {
  interface Attributes {
    _menu?:
      | ReactElement
      | ((close: () => void) => ReactElement)
      | ConfigObject
      | Falsy
  }
}
```

`deepMenuProp` uses `react-laag` under the hood. 

The value of the `_menu` prop can be:
  - A config object, which can have the following properties:
    - `placement` - The placement of the menu. This is a `react-laag` placement value. Defaults to `"bottom-start"`.
    - `enabled` - Whether the menu is enabled. Defaults to `true`. Note that this is just for convenience, you can also set the `_menu` prop to `false` to disable it.
    - `body` - The body of the menu. Can be a ReactElement or a function. If it's a function, it will be called with a `close` function. The function should return a ReactElement, which will be rendered as the menu. The `close` function can be called to close the menu.
  - Or, as a shortcut, the `body` value of the config.

## Examples

Let's set up the HOC in conjuction with [deepTwProp](/docs/gallery/tw-prop):
```tsx
import { Beyond } from "react-beyond"
import { deepTwProp } from "@react-beyond/twrop"
import { deepMenuProp } from "@react-beyond/menuprop"

const el = (
  <Beyond hocs={[
    deepMenuProp()
    deepTwProp()
  ]}>
    <App />
  </Beyond>
)
```

`deepMenuProp`, when the trigger element is pressed, adds an `active` class to it. With tailwind, you can add in-place styling to control the different states. Let's add a yellow color when the menu is open (the element has the `active` class):

```tsx
<button className="[&.active]:[outline:4px_auto_yellow]" _menu={/* ... */} />
```

Now let's synchronize this with the `:active` pseudo-class, so the button gets a yellow outline when it's pressed, and stays that way until the menu is closed:

```tsx
<button
  className={clsx([
    // highlight-next-line
    '[&:active]:[outline:4px_auto_yellow]',
    // highlight-next-line
    '[&.active]:[outline:4px_auto_yellow]'
  ])}
  _menu={/* ... */}
>
  This is a menu
</button>
```

After this, under `<App />`, elements like the following:

```tsx
<button
  _tw={[
    '[&:active]:[outline:4px_auto_yellow]',
    '[&.active]:[outline:4px_auto_yellow]'
  ]}
  _menu={
    <ul _tw="bg-white text-slate-700 p-3 rounded">
      <li>menu item 1</li>
      <li>menu item 2</li>
      <li>menu item 3</li>
    </ul>
  }
>
  This is a menu
</button>
```

will behave like this:

![menuprop](/img/menuprop.gif)

Now let's add some more styling to the items, and close the menu on item click:

```tsx
<button
  _tw={[
    '[&:active]:[outline:4px_auto_yellow]',
    '[&.active]:[outline:4px_auto_yellow]'
  ]}
  // highlight-next-line
  _menu={(close) => (
    <ul
      _tw={[
        'bg-white text-slate-700 p-3 rounded',
        // highlight-next-line
        '[&_li:hover]:bg-slate-200',
        // highlight-next-line
        '[&_li:hover]:cursor-pointer'
      ]}
    >
      {/* highlight-next-line */}
      <li onClick={close}>menu item 1</li>
      {/* highlight-next-line */}
      <li onClick={close}>menu item 2</li>
      {/* highlight-next-line */}
      <li onClick={close}>menu item 3</li>
    </ul>
  )}
>
  This is a menu
</button>
```

Finally, change the placement to the right side:

```tsx
<button
  _tw={[
    '[&:active]:[outline:4px_auto_yellow]',
    '[&.active]:[outline:4px_auto_yellow]'
  ]}
  _menu={{
    // highlight-next-line
    placement: 'right-start',
    body: (close) => (
      <ul
        _tw={[
          'bg-white text-slate-700 p-3 rounded',
          '[&_li:hover]:bg-slate-200',
          '[&_li:hover]:cursor-pointer'
        ]}
      >
        <li onClick={close}>menu item 1</li>
        <li onClick={close}>menu item 2</li>
        <li onClick={close}>menu item 3</li>
      </ul>
    )
  }}
>
  This is a menu
</button>
```

![menuprop2](/img/menuprop2.gif)
